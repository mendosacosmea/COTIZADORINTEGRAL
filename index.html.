<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SERVICIO INTEGRAL M.S. | Log√≠stica y Mercado Flex</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #f8fafc;
        }

        .glass-nav {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }

        .card-main {
            background: white;
            border-radius: 2rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.04);
        }

        .size-card {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            border: 2px solid #f1f5f9;
            position: relative;
            background: white;
            overflow: hidden;
        }

        .size-card.active {
            border-color: #2563eb;
            background-color: #eff6ff;
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.1);
        }

        .check-icon {
            display: none;
            position: absolute;
            top: 10px;
            right: 10px;
            color: #2563eb;
        }

        .size-card.active .check-icon {
            display: block;
        }

        .input-styled {
            width: 100%;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            padding: 0.85rem;
            font-weight: 600;
            outline: none;
            transition: all 0.2s;
        }

        .input-styled:focus {
            border-color: #2563eb;
            background: white;
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
        }

        .dot { transition: all 0.3s ease-in-out; }
        input:checked~.dot { transform: translateX(100%); background-color: #2563eb; }
        input:checked~.block-bg { background-color: #dbeafe; }

        #alert-modal, #ai-loading {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(4px);
            z-index: 100;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .expandable {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
            opacity: 0;
        }

        .expandable.open {
            max-height: 1200px;
            opacity: 1;
            margin-top: 1rem;
        }

        .counter-btn {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            font-weight: bold;
            transition: all 0.2s;
        }
    </style>
</head>

<body class="text-slate-900 pb-12">

    <!-- Modal Alerta -->
    <div id="alert-modal">
        <div class="bg-white rounded-3xl p-8 max-w-sm w-full shadow-2xl text-center">
            <div class="w-16 h-16 bg-red-100 text-red-600 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                </svg>
            </div>
            <h3 class="text-xl font-black mb-2 uppercase italic">Atenci√≥n</h3>
            <p id="alert-text" class="text-slate-500 text-sm mb-6"></p>
            <button onclick="closeAlert()" class="w-full bg-slate-900 text-white py-4 rounded-2xl font-black uppercase italic shadow-lg">Entendido</button>
        </div>
    </div>

    <!-- Cargando -->
    <div id="ai-loading">
        <div class="bg-white rounded-3xl p-8 max-w-sm w-full shadow-2xl text-center">
            <div class="w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                </svg>
            </div>
            <h3 class="text-xl font-black mb-1 uppercase italic">Procesando</h3>
            <p class="text-slate-400 text-xs italic">Preparando detalles de env√≠o...</p>
        </div>
    </div>

    <nav class="glass-nav sticky top-0 z-50 border-b border-slate-100">
        <div class="max-w-4xl mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex flex-col">
                <span class="text-xl font-extrabold tracking-tighter text-slate-900 uppercase italic leading-none">SERVICIO INTEGRAL M.S</span>
                <div class="flex items-center gap-1 mt-1">
                    <span class="text-[8px] font-bold text-blue-600 uppercase tracking-widest">LOG√çSTICA Y DISTRIBUCI√ìN</span>
                    <span class="text-[8px] text-slate-300">|</span>
                    <span class="text-[8px] font-bold text-orange-500 uppercase tracking-widest">MERCADO FLEX</span>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-3xl mx-auto px-4 py-8">
        <div class="card-main p-6 md:p-10 border border-slate-100">
            
            <!-- 1. Paquetes -->
            <div class="mb-10">
                <div class="flex items-center justify-between mb-4">
                    <label class="block text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] italic">1. Tama√±o de Carga</label>
                    <div class="flex items-center bg-slate-100 p-1 rounded-xl">
                         <button onclick="changeQty(-1)" class="counter-btn shadow-sm text-slate-400 hover:text-slate-600">-</button>
                         <span id="qty-display" class="w-10 text-center text-lg font-black italic">1</span>
                         <button onclick="changeQty(1)" class="counter-btn shadow-sm text-blue-600 hover:text-blue-800">+</button>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                    <div onclick="setSize('Peque√±o', 1200, this)" class="size-card rounded-2xl p-4 border-2">
                        <svg class="check-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"></path></svg>
                        <p class="font-black text-slate-800 italic text-sm uppercase mb-1">Peque√±o</p>
                        <p class="text-[10px] text-slate-500 leading-tight mb-2 italic">Sobres, calzado, Flex.</p>
                        <p class="text-blue-600 font-bold text-xs">$1.200 c/u</p>
                    </div>
                    <div onclick="setSize('Mediano', 1600, this)" class="size-card rounded-2xl p-4 border-2">
                        <svg class="check-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"></path></svg>
                        <p class="font-black text-slate-800 italic text-sm uppercase mb-1">Mediano</p>
                        <p class="text-[10px] text-slate-500 leading-tight mb-2 italic">E-comers, microondas, TV 32".</p>
                        <p class="text-blue-600 font-bold text-xs">$1.600 c/u</p>
                    </div>
                    <div onclick="setSize('Grande', 2000, this)" class="size-card rounded-2xl p-4 border-2">
                        <svg class="check-icon w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"></path></svg>
                        <p class="font-black text-slate-800 italic text-sm uppercase mb-1">Grande</p>
                        <p class="text-[10px] text-slate-500 leading-tight mb-2 italic">Heladera chica, cubiertas.</p>
                        <p class="text-blue-600 font-bold text-xs">$2.000 c/u</p>
                    </div>
                </div>
            </div>

            <!-- 2. Ruta -->
            <div class="mb-10">
                <label class="block text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4 italic">2. Ruta del Viaje</label>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="space-y-3">
                        <select id="ori-loc" onchange="updatePrice()" class="input-styled text-sm">
                            <option value="" disabled selected>Retiro en...</option>
                            <option value="0">Rosario</option>
                            <option value="1">G. Baigorria</option>
                            <option value="2">C. Berm√∫dez</option>
                            <option value="3">F. L. Beltr√°n</option>
                            <option value="4">San Lorenzo</option>
                            <option value="5">Ricardone</option>
                            <option value="6">Puerto Gral. San Mart√≠n</option>
                            <option value="7">Aldao</option>
                            <option value="8">Timb√∫es</option>
                            <option value="9">Andino</option>
                            <option value="10">Serodino</option>
                        </select>
                        <input type="text" id="ori-address" placeholder="Calle y Altura de Retiro" class="input-styled text-sm">
                    </div>
                    <div class="space-y-3">
                        <select id="des-loc" onchange="updatePrice()" class="input-styled text-sm">
                            <option value="" disabled selected>Entrega en...</option>
                            <option value="0">Rosario</option>
                            <option value="1">G. Baigorria</option>
                            <option value="2">C. Berm√∫dez</option>
                            <option value="3">F. L. Beltr√°n</option>
                            <option value="4">San Lorenzo</option>
                            <option value="5">Ricardone</option>
                            <option value="6">Puerto Gral. San Mart√≠n</option>
                            <option value="7">Aldao</option>
                            <option value="8">Timb√∫es</option>
                            <option value="9">Andino</option>
                            <option value="10">Serodino</option>
                        </select>
                        <input type="text" id="des-address" placeholder="Calle y Altura de Entrega" class="input-styled text-sm">
                    </div>
                </div>
            </div>

            <!-- 3. Facturaci√≥n -->
            <div class="mb-10">
                <div class="bg-blue-50 p-6 rounded-3xl border border-blue-100">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-[10px] font-black text-blue-900 uppercase italic">¬øDesea Factura A, B o C?</span>
                        <label class="flex items-center cursor-pointer">
                            <div class="relative">
                                <input id="invoice-toggle" type="checkbox" onchange="toggleTaxForm()" class="sr-only">
                                <div class="block-bg block bg-slate-200 w-10 h-5 rounded-full transition-colors"></div>
                                <div class="dot absolute left-1 top-0.5 bg-white w-4 h-4 rounded-full shadow transition-transform"></div>
                            </div>
                        </label>
                    </div>
                    <div id="tax-form" class="expandable space-y-3">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <select id="tax-type" class="w-full p-3 bg-white border border-slate-200 rounded-xl text-xs font-bold outline-none">
                                <option value="B">Factura B</option>
                                <option value="A">Factura A</option>
                                <option value="C">Factura C</option>
                            </select>
                            <input type="number" id="tax-id" placeholder="CUIT / CUIL" class="w-full p-3 bg-white border border-slate-200 rounded-xl text-xs font-bold outline-none">
                        </div>
                        <input type="text" id="tax-name" placeholder="Raz√≥n Social" class="w-full p-3 bg-white border border-slate-200 rounded-xl text-xs font-bold outline-none">
                        <input type="text" id="tax-address" placeholder="Domicilio Fiscal" class="w-full p-3 bg-white border border-slate-200 rounded-xl text-xs font-bold outline-none">
                        <input type="email" id="tax-email" placeholder="Email para factura" class="w-full p-3 bg-white border border-slate-200 rounded-xl text-xs font-bold outline-none">
                    </div>
                </div>
            </div>

            <!-- 4. Contacto -->
            <div class="mb-10 space-y-3">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <input type="text" id="cust-name" placeholder="Tu Nombre / Empresa" class="input-styled text-sm">
                    <input type="tel" id="cust-phone" placeholder="WhatsApp (Ej: 341...)" class="input-styled text-sm">
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <select id="payment-method" class="input-styled text-sm">
                        <option value="" disabled selected>Medio de Pago...</option>
                        <option value="Efectivo en Origen">Efectivo en Origen</option>
                        <option value="Efectivo en Destino">Efectivo en Destino</option>
                        <option value="Billetera Virtual / Transferencia">Billetera Virtual / Transferencia</option>
                    </select>
                    <input type="text" id="pkg-desc" placeholder="¬øQu√© llevamos?" class="input-styled text-sm">
                </div>
            </div>

            <!-- Total -->
            <div class="pt-8 border-t border-slate-100 flex flex-col md:flex-row items-center justify-between gap-6">
                <div class="text-center md:text-left">
                    <p class="text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1">Presupuesto Estimado</p>
                    <h2 id="final-price" class="text-5xl font-black text-slate-900 italic tracking-tighter">$0</h2>
                </div>
                <button onclick="requestOrder()" class="w-full md:w-auto bg-blue-600 text-white px-10 py-5 rounded-2xl font-black uppercase italic tracking-widest shadow-xl shadow-blue-200 active:scale-95 transition-all">
                    Confirmar Pedido üöõ
                </button>
            </div>
        </div>
    </main>

    <script>
        let currentSize = { label: '', base: 0 };
        let quantity = 1;
        const VALOR_SALTO = 400;

        function changeQty(val) {
            quantity = Math.max(1, quantity + val);
            document.getElementById('qty-display').innerText = quantity;
            updatePrice();
        }

        function toggleTaxForm() {
            const form = document.getElementById('tax-form');
            if (document.getElementById('invoice-toggle').checked) form.classList.add('open');
            else form.classList.remove('open');
        }

        function setSize(label, base, el) {
            currentSize = { label, base };
            document.querySelectorAll('.size-card').forEach(c => c.classList.remove('active'));
            el.classList.add('active');
            updatePrice();
        }

        function updatePrice() {
            const sIdx = document.getElementById('ori-loc').value;
            const eIdx = document.getElementById('des-loc').value;
            if (!currentSize.label || sIdx === "" || eIdx === "") return;
            const jumpCount = Math.abs(parseInt(sIdx) - parseInt(eIdx));
            let total = (quantity >= 3) ? (currentSize.base * quantity) : (currentSize.base * quantity) + (jumpCount * VALOR_SALTO);
            document.getElementById('final-price').innerText = `$${Math.round(total).toLocaleString('es-AR')}`;
        }

        function showAlert(text) {
            document.getElementById('alert-text').innerText = text;
            document.getElementById('alert-modal').style.display = 'flex';
        }

        function closeAlert() { document.getElementById('alert-modal').style.display = 'none'; }

        async function requestOrder() {
            const f = {
                size: currentSize.label, qty: quantity,
                oriLoc: document.getElementById('ori-loc').value,
                desLoc: document.getElementById('des-loc').value,
                oriAddr: document.getElementById('ori-address').value.trim(),
                desAddr: document.getElementById('des-address').value.trim(),
                name: document.getElementById('cust-name').value.trim(),
                phone: document.getElementById('cust-phone').value.trim(),
                desc: document.getElementById('pkg-desc').value.trim(),
                payment: document.getElementById('payment-method').value
            };

            if (!f.size || !f.oriLoc || !f.desLoc || !f.oriAddr || !f.desAddr || !f.name || !f.phone || !f.payment) {
                showAlert("Por favor, completa todos los campos requeridos.");
                return;
            }

            let taxMsg = "";
            if (document.getElementById('invoice-toggle').checked) {
                taxMsg = `%0A%0Aüßæ *DATOS DE FACTURACI√ìN:*%0A- CUIT: ${document.getElementById('tax-id').value}%0A- RAZ√ìN: ${document.getElementById('tax-name').value}`;
            }

            // Datos de transferencia con separador visual para el cliente
            let paymentDetails = "";
            if (f.payment === "Billetera Virtual / Transferencia") {
                paymentDetails = `%0A%0A‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ%0Aüîî *INFO PARA EL CLIENTE:*%0A‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ%0Aüí∞ *Datos para abonar tu env√≠o:*%0A%0Aüìå *Titular:* Mendosa Cosmea Milton Hern√°n%0Aüìå *Alias:* servicioms.mp%0Aüìå *CUIT/CUIL:* 20-34701759-1%0Aüìå *Email:* mendosacosmea@gmail.com%0A%0A‚úÖ _Por favor, envi√° el comprobante por ac√° una vez realizado._%0A‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ`;
            }

            document.getElementById('ai-loading').style.display = 'flex';
            await new Promise(r => setTimeout(r, 800));
            document.getElementById('ai-loading').style.display = 'none';

            const locA = document.getElementById('ori-loc').options[document.getElementById('ori-loc').selectedIndex].text;
            const locB = document.getElementById('des-loc').options[document.getElementById('des-loc').selectedIndex].text;
            
            const msg = `üöõ *NUEVA SOLICITUD DE ENV√çO*%0A%0A` +
                        `üë§ *CLIENTE:* ${f.name}%0A` +
                        `üìä *CARGA:* ${f.qty} x ${f.size}%0A` +
                        `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ%0A` +
                        `üìç *RETIRO:* ${locA} - ${f.oriAddr}%0A` +
                        `üèÅ *ENTREGA:* ${locB} - ${f.desAddr}%0A` +
                        `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ%0A` +
                        `üí≥ *PAGO:* ${f.payment}%0A` +
                        `üí∞ *TOTAL: ${document.getElementById('final-price').innerText}*` + 
                        taxMsg + 
                        paymentDetails;

            window.open(`https://wa.me/5493413753881?text=${encodeURIComponent(msg)}`, '_blank');
        }
    </script>
</body>
</html>
